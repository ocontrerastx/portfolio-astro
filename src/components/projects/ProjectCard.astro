---
import type { CollectionEntry } from "astro:content";

interface Props {
  project: CollectionEntry<"projects">;
}

const { project } = Astro.props;

// Safe data access
const data = project?.data;
const slug = project?.slug;

const roleLabels: Record<string, string> = {
  UX: "User Experience",
  PM: "Product Management",
  DEV: "Development",
};
---

{
  data && (
    <a href={`/projects/${slug}`} class="project-card group">
      <div class="image-wrapper">
        <img src={data.thumbnail} alt={data.title} loading="lazy" />
      </div>
      <div class="content">
        {data.roles && (
          <div class="badge-container">
            {data.roles.map((role: "UX" | "PM" | "DEV") => (
              <span class={`badge badge-${role.toLowerCase()}`}>
                {roleLabels[role]}
              </span>
            ))}
          </div>
        )}

        <h3 class="title">{data.title}</h3>
        <p class="tagline">{data.tagline}</p>
      </div>
    </a>
  )
}

<style>
  .project-card {
    text-decoration: none;
    display: block;
  }

  .image-wrapper {
    border-radius: 24px;
    overflow: hidden;
    margin-bottom: 1.5rem;
    background: #f0eeed;
    aspect-ratio: 16/10;
  }

  .image-wrapper img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Badge Styling */
  .badge-container {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
  }
  .badge {
    font-size: 10px;
    font-weight: 900;
    padding: 0.2rem 0.5rem;
    border-radius: 6px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  /* Ring Borders using your brand's logic but soft tones for light theme */
  .badge-ux {
    background-color: #eff6ff;
    color: #1d4ed8;
    box-shadow: inset 0 0 0 1px rgba(29, 78, 216, 0.15);
  }
  .badge-pm {
    background-color: #f5f3ff;
    color: #6d28d9;
    box-shadow: inset 0 0 0 1px rgba(109, 40, 217, 0.15);
  }
  .badge-dev {
    background-color: #f0fdf4;
    color: #15803d;
    box-shadow: inset 0 0 0 1px rgba(21, 128, 61, 0.15);
  }

  /* Typography */
  .title {
    font-size: 1.75rem;
    font-weight: 900;
    margin: 0 0 0.4rem 0;
    color: var(--text-main);
    letter-spacing: -0.02em;
    transition: color 0.3s ease;
  }

  .tagline {
    color: var(--text-muted);
    line-height: 1.5;
    font-size: 1.1rem;
  }

  /* --- Restored Hover Interactions --- */

  /* Image zoom */
  .project-card:hover .image-wrapper img {
    transform: scale(1.04);
  }

  /* Title color shift using your brand accent */
  .project-card:hover .title {
    color: var(--brand-accent);
  }
</style>
